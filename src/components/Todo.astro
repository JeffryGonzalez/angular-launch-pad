---
interface Props {
	who: 'Hypertheory' | 'Company';
	dueDate?: string;
}

const { who, dueDate } = Astro.props;
---

<div class:list={['todo-item', `todo-${who.toLowerCase()}`]}>
	<div class="todo-header">
		<svg class="todo-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
			<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
		</svg>
		<span class="todo-label">Needs Done:</span>
		<span class="todo-assignee">{who}</span>
		{dueDate && (
			<span class="todo-due-date">
				<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
					<line x1="16" y1="2" x2="16" y2="6"></line>
					<line x1="8" y1="2" x2="8" y2="6"></line>
					<line x1="3" y1="10" x2="21" y2="10"></line>
				</svg>
				Due: {dueDate}
			</span>
		)}
	</div>
	<div class="todo-content">
		<slot />
	</div>
</div>

<style>
	.todo-item {
		margin: 1.5rem 0;
		padding: 1rem 1.25rem;
		border-left: 4px solid;
		border-radius: 0.5rem;
		background: var(--todo-bg);
		border-color: var(--todo-border);
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	}

	.todo-header {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		margin-bottom: 0.75rem;
		font-weight: 600;
		font-size: 0.875rem;
		color: var(--todo-color);
	}

	.todo-icon {
		flex-shrink: 0;
		color: var(--todo-icon-color);
	}

	.todo-label {
		font-weight: 700;
		margin-right: -0.375rem;
	}

	.todo-assignee {
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	.todo-due-date {
		display: flex;
		align-items: center;
		gap: 0.375rem;
		margin-left: auto;
		font-size: 0.8125rem;
		opacity: 0.9;
	}

	.todo-content {
		color: var(--sl-color-gray-2);
		line-height: 1.6;
	}

	.todo-content :global(p:first-child) {
		margin-top: 0;
	}

	.todo-content :global(p:last-child) {
		margin-bottom: 0;
	}

	/* Hypertheory styling - purple/indigo theme */
	.todo-hypertheory {
		--todo-bg: rgba(139, 92, 246, 0.1);
		--todo-border: rgb(139, 92, 246);
		--todo-color: rgb(124, 58, 237);
		--todo-icon-color: rgb(139, 92, 246);
	}

	/* Company styling - orange/amber theme for better color-blind accessibility */
	.todo-company {
		--todo-bg: rgba(251, 146, 60, 0.1);
		--todo-border: rgb(251, 146, 60);
		--todo-color: rgb(234, 88, 12);
		--todo-icon-color: rgb(251, 146, 60);
	}

	@media (prefers-color-scheme: dark) {
		.todo-item {
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
		}

		.todo-hypertheory {
			--todo-bg: rgba(139, 92, 246, 0.15);
			--todo-color: rgb(167, 139, 250);
		}

		.todo-company {
			--todo-bg: rgba(251, 146, 60, 0.15);
			--todo-color: rgb(253, 186, 116);
		}

		.todo-content {
			color: var(--sl-color-gray-1);
		}
	}

	:root[data-theme='dark'] .todo-item {
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
	}

	:root[data-theme='dark'] .todo-hypertheory {
		--todo-bg: rgba(139, 92, 246, 0.15);
		--todo-color: rgb(167, 139, 250);
	}

	:root[data-theme='dark'] .todo-company {
		--todo-bg: rgba(251, 146, 60, 0.15);
		--todo-color: rgb(253, 186, 116);
	}

	:root[data-theme='dark'] .todo-content {
		color: var(--sl-color-gray-1);
	}
</style>
